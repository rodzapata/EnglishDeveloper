generator client {
  provider     = "prisma-client"
  output       = "../src/generated/prisma"
  moduleFormat = "cjs"
}

datasource db {
  provider = "postgresql"
}

model PartOfSpeech {
  id                     Int                      @id(map: "pk_part_of_speech") @default(autoincrement())
  word                   String                   @unique(map: "uq_part_of_speech_word")
  translation            String?
  dictionary_translation DictionaryTranslation[]

  @@map("part_of_speech")
}

model Dictionary {
  id                     Int                      @id(map: "pk_dictionary") @default(autoincrement())
  word                   String                   @unique(map: "uq_dictionary_word")
  pronunciation          String
  period_type            Int
  dictionary_translation DictionaryTranslation[]

  @@map("dictionary")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model DictionaryTranslation {
  id                 Int                  @id(map: "pk_dictionary_translation") @default(autoincrement())
  translation        String
  dictionary_id      Int
  part_of_speech_id  Int
  dictionary         Dictionary           @relation(fields: [dictionary_id], references: [id], onDelete: Cascade, map: "fk_dictionary_translation_dictionary")
  part_of_speech     PartOfSpeech         @relation(fields: [part_of_speech_id], references: [id], map: "fk_dictionary_translation_part_of_speech")
  learned_vocabulary LearnedVocabulary[]

  @@unique([dictionary_id, part_of_speech_id, translation], map: "uq_dictionary_translation_unique")
  @@index([dictionary_id], map: "idx_dictionary_translation_dictionary_id")
  @@index([part_of_speech_id], map: "idx_dictionary_translation_part_of_speech_id")

   @@map("dictionary_translation")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model LearnedVocabulary {
  id                        Int                    @id(map: "pk_learned_vocabulary") @default(autoincrement())
  sentence                  String
  translation               String
  vocabulary_source_id      Int
  dictionary_translation_id Int
  dictionary_translation    DictionaryTranslation @relation(fields: [dictionary_translation_id], references: [id], map: "fk_learned_vocabulary_dictionary_translation")
  vocabulary_source         VocabularySource      @relation(fields: [vocabulary_source_id], references: [id], onDelete: Cascade, map: "fk_learned_vocabulary_vocabulary_source")

  @@index([dictionary_translation_id], map: "idx_learned_vocabulary_dictionary_translation_id")
  @@index([vocabulary_source_id], map: "idx_learned_vocabulary_vocabulary_source_id")

   @@map("learned_vocabulary")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
model VocabularySource {
  id                 Int                  @id(map: "pk_vocabulary_source") @default(autoincrement())
  title              String
  category           String
  url                String
  learned_vocabulary LearnedVocabulary[]

  @@map("vocabulary_source")

}
